{
  "$schema": "https://raw.githubusercontent.com/devcontainers/spec/refs/heads/main/schemas/devContainer.base.schema.json",
  "name": "config.d",
  "image": "mcr.microsoft.com/devcontainers/base:bookworm",
  "workspaceFolder": "/home/vscode/workspace",
  "remoteUser": "vscode",
  "remoteEnv": {
    "GITHUB_TOKEN": "${localEnv:GITHUB_TOKEN}",
    "CLAUDE_FILESYSTEM_ALLOWED_DIRS": "/home/vscode/workspace"
  },
  "mounts": [
    "source=${localEnv:HOME}/.claude/settings.json,target=/home/vscode/.claude/settings.json,type=bind",
    "source=nix-store,target=/nix,type=volume"
  ],
  "features": {
    "ghcr.io/devcontainers/features/nix:1": {
      "extraNixConfig": "experimental-features = nix-command flakes"
    },
    "ghcr.io/devcontainers/features/node:1": {},
    "ghcr.io/devcontainers/features/github-cli:1": {},
    "ghcr.io/anthropics/devcontainer-features/claude-code:1": {},
    "ghcr.io/devcontainers-features/collection/starship:latest": {}
  },
  "onCreateCommand": ".devcontainer/hooks/on-create.sh"
}
