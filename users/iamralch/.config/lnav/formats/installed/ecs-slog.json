{
    "$schema": "https://lnav.org/schemas/format-v1.schema.json",
    "ecs_slog_regex": {
        "title": "AWS ECS Golang slog",
        "description": "ECS log with a Golang slog JSON message (regex parsing)",
        "regex": {
            "body": {
                "pattern": "^(?<timestamp>\\S+)\\s+(?<stream>\\S+)\\s+(?<body>\\{(?=.*\"time\"\\s*:\\s*\"(?<time>[^\"]+)\")(?=.*\"level\"\\s*:\\s*\"(?<level>[^\"]+)\")(?=.*\"msg\"\\s*:\\s*\"(?<msg>(?:\\\\\"|[^\"])*)\").*\\})$"
            }
        },
        "timestamp-field": "time",
        "level-field": "level",
        "level": {
            "debug": "^DEBUG$",
            "info": "^INFO$",
            "warning": "^WARN(ING)?$",
            "error": "^ERROR$",
            "fatal": "^FATAL$"
        },
        "body-field": "msg",
        "value": {
            "time": {
                "description": "Timestamp emitted by slog inside the JSON payload (RFC3339Nano)",
                "kind": "string",
                "hidden": true
            },
            "level": {
                "description": "Raw log level emitted by slog before normalization",
                "kind": "string"
            },
            "stream": {
                "description": "AWS ECS log stream path identifying service and task",
                "kind": "string",
                "identifier": true,
                "hidden": true
            },
            "msg": {
                "description": "Human-readable log message emitted by the application",
                "kind": "string"
            }
        },
        "line-format": [
            {
                "field": "time",
                "min-width": 19
            },
            " ",
            {
                "field": "level",
                "min-width": 5
            },
            " ",
            {
                "field": "stream",
                "max-width": 40
            },
            " ",
            {
                "field": "msg",
                "auto-width": true
            }
        ],
        "sample": [
            {
                "line": "2026-01-04T04:54:20.315000+00:00 /app/copay-coupon-api-broker/3550a624f44c4797bf4394c169a3df08 {\"time\":\"2026-01-04T04:54:20.315287514Z\",\"level\":\"INFO\",\"msg\":\"Updating program coupon event batch\",\"version\":\"v0.0.0-20260102135729-0ff8bf2cbf0b\"}"
            },
            {
                "line": "2026-01-04T04:54:20.315000+00:00 /app/copay-coupon-api-broker/3550a624f44c4797bf4394c169a3df08 {\"time\":\"2026-01-04T04:54:20.315298651Z\",\"level\":\"INFO\",\"msg\":\"Pipeline completed successfully, adjusting poll interval\",\"version\":\"v0.0.0-20260102135729-0ff8bf2cbf0b\",\"event_count\":0,\"next_interval\":30000000000}"
            }
        ]
    }
}
